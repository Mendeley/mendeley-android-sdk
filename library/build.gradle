apply plugin: 'com.android.library'

configurations {
    stagingDebug
    stagingRelease
    productionDebug
    productionRelease
}

dependencies {
    implementation fileTree(dir: 'libs', include: '*.jar')
    api 'com.squareup.okhttp3:okhttp:3.10.0'

    // Dependencies of the unit tests
    // Reference: https://plus.google.com/+AndroidDevelopers/posts/Xw8qbKRwMxx
    androidTestImplementation ('org.skyscreamer:jsonassert:1.2.3') {
        exclude group: 'org.json', module: 'json'
    }
}

android {
    compileSdkVersion 27
    buildToolsVersion '27.0.3'

    defaultConfig {
        minSdkVersion 19
        targetSdkVersion 27
    }

    sourceSets {
        main {
        }
    }

    lintOptions {
        abortOnError false
    }

    // Ref: http://stackoverflow.com/questions/24860659/multi-flavor-app-based-on-multi-flavor-library-in-android-gradle
    publishNonDefault true
    flavorDimensions "default"

    productFlavors{
        staging{
            dimension "default"
            buildConfigField 'String', 'WEB_API_BASE_URL', '\"https://api-staging.mendeley.com/\"'
            buildConfigField 'String', 'REDIRECT_URI', '\"http://localhost/auth_return\"'
        }
        production{
            dimension "default"
            buildConfigField 'String', 'WEB_API_BASE_URL', '\"https://api.mendeley.com/\"'
            buildConfigField 'String', 'REDIRECT_URI', '\"https://mendeley.com/callback/\"'
        }
    }
}

